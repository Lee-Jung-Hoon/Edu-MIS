<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="userAssMapper">


<!-- 과제목록을 불러오는 쿼리 -->
 <select id="adminAssList" parameterType="String" resultType="AdminAssVO">
    select a.no,
           a.title, 
           to_char(a.start_Date,'yyyy-mm-dd')as startDate,
           to_char(a.end_Date,'yyyy-mm-dd')as endDate,
           case when (select count(*) from t_user_assignment_board where no = a.no and id = #{id}) = 0 then 'X'
                else 'O'
            end isSubmit
    from t_adm_assignment_board a
 </select>
 
 <!-- 해야할 과제 상세 조회 -->
  <select id="adminAssDetail" parameterType="integer" resultType="AdminAssVO">
    select no,
           title,
           content,
           to_char(start_Date,'yyyy-mm-dd')as startDate,
           to_char(end_Date,'yyyy-mm-dd')as endDate,
           org_File_Name as orgFileName,
           real_File_Name as realFileName,
           file_Path
    from t_adm_assignment_board
    where no = #{no}
 </select>
 
<!-- 과제제출하는 쿼리 -->
<insert  id="assRegist" parameterType="UserAssVO" >
insert into t_user_assignment_board(
   id, 
   name,
   no,
   content,
   org_File_Name,
   real_File_Name,
   file_Path
   )
   values(
   #{id},
   #{name},
   #{no},
   #{content},
   #{orgFileName},
   #{realFileName},
   #{filePath}
   )
</insert>

<!-- 내가 제출한 과제 조회 -->
<select id="userAssDetail" parameterType="integer" resultType="UserAssVO">
  select id,
         name,
         no,
         content,
         org_File_Name as orgFileName,
         real_File_Name as realFileName,
         file_Path as filePath
    from t_user_assignment_board
    where no =#{no}
</select>

<!-- 내가 제출한 과제 수정 -->
<update id="userAssUpdate" parameterType="UserAssVO">
  update t_user_assignment_board set
         content = #{content},
         org_File_Name = #{orgFileName},
         real_File_Name = #{realFileName},
         file_Path = #{filePath}
   where no =#{no}
</update>

<!-- 제출여부 조회 -->
<select id="userSubmitCheck" parameterType="String" >

</select>


</mapper>